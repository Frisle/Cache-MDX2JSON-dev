<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="MDX2JSON.Users">
<Super>%RegisteredObject</Super>
<TimeCreated>63669,64053.502396</TimeCreated>

<Method name="SetConfig">
<ClassMethod>1</ClassMethod>
<FormalSpec>App:%String,Config:%String,User:%String=$Username</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set ns = $Namespace
	zn "%SYS"
	set Properties("Attributes",App)= $lb(Config)
	set st =##class(Security.Users).Modify(User,.Properties)
	zn ns
	return st
]]></Implementation>
</Method>

<Method name="GetConfig">
<ClassMethod>1</ClassMethod>
<FormalSpec>App:%String,User:%String=$Username</FormalSpec>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	set ns = $Namespace
	zn "%SYS"
	set st =##class(Security.Users).Get(User,.Properties)
	zn ns
	return $lg(Properties("Attributes",App))
]]></Implementation>
</Method>

<Method name="ExportConfig">
<Description>
do ##class(MDX2JSON.Users).ExportConfig()</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>App:%String,User:%String=$Username,FileName:%String=##class(%File).TempFilename("txt")</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	
	set config = ..GetConfig(App,User)
	set stream=##class(%Stream.FileCharacter).%New()
	Set stream.TranslateTable="UTF8"
	set st=stream.LinkToFile(FileName)
	return:$$$ISERR(st) st
	set st=stream.Write(config)
	return:$$$ISERR(st) st
	set st=stream.%Save()
	return st
]]></Implementation>
</Method>

<Method name="ImportConfig">
<ClassMethod>1</ClassMethod>
<FormalSpec>App:%String,User:%String=$Username,FileName:%String</FormalSpec>
<ReturnType>%String</ReturnType>
</Method>

<Method name="GetFavorites">
<ClassMethod>1</ClassMethod>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	set st = ##class(%DeepSee.UserPortal.Utils).%GetFavoritesForUser(.Favorites)
	return:$$$ISERR(st) st
	set st = ##class(%ZEN.Auxiliary.jsonProvider).%ArrayToJSON($lb("FullName","ShortName","Folder","Tip","Type","Icon","AddDate","URL"),.Favorites)
	return:$$$ISERR(st) st
	return $$$OK
]]></Implementation>
</Method>
</Class>
</Export>
